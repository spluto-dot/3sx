#include "sf33rd/Source/Game/EFFB6.h"
#include "common.h"
#include "sf33rd/Source/Game/EFFECT.h"
#include "sf33rd/Source/Game/Message3rd/C_USA/msgTable_usa.h"
#include "sf33rd/Source/Game/aboutspr.h"
#include "sf33rd/Source/Game/debug/OTESTDAT.h"

#include <string.h>

#if !defined(TARGET_PS2)
#include <strings.h>
#endif

void get_message_conn_data(WORK_Other_CONN* ewk, s16 kind, s16 pl, s16 msg);
s32 msgConvertObjNum(u8* moji, s32* spc, s32* hz, u16* num, u8 hzSel);
s32 msgCheckCodeSize(u8 data);

const s8* src_han_zen_conv[256] = {
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x49", "\x81\x68", "\x81\x94",
    "\x81\x90", "\x81\x93", "\x81\x95", "\x81\x66", "\x81\x69", "\x81\x6A", "\x81\x96", "\x81\x7B", "\x81\x43",
    "\x81\x7C", "\x81\x44", "\x81\x5E", "\x82\x4F", "\x82\x50", "\x82\x51", "\x82\x52", "\x82\x53", "\x82\x54",
    "\x82\x55", "\x82\x56", "\x82\x57", "\x82\x58", "\x81\x46", "\x81\x47", "\x81\x83", "\x81\x81", "\x81\x84",
    "\x81\x48", "\x81\x97", "\x82\x60", "\x82\x61", "\x82\x62", "\x82\x63", "\x82\x64", "\x82\x65", "\x82\x66",
    "\x82\x67", "\x82\x68", "\x82\x69", "\x82\x6A", "\x82\x6B", "\x82\x6C", "\x82\x6D", "\x82\x6E", "\x82\x6F",
    "\x82\x70", "\x82\x71", "\x82\x72", "\x82\x73", "\x82\x74", "\x82\x75", "\x82\x76", "\x82\x77", "\x82\x78",
    "\x82\x79", "\x81\x6D", "\x81\x8F", "\x81\x6E", "\x81\x4F", "\x81\x51", "\x81\x65", "\x82\x81", "\x82\x82",
    "\x82\x83", "\x82\x84", "\x82\x85", "\x82\x86", "\x82\x87", "\x82\x88", "\x82\x89", "\x82\x8A", "\x82\x8B",
    "\x82\x8C", "\x82\x8D", "\x82\x8E", "\x82\x8F", "\x82\x90", "\x82\x91", "\x82\x92", "\x82\x93", "\x82\x94",
    "\x82\x95", "\x82\x96", "\x82\x97", "\x82\x98", "\x82\x99", "\x82\x9A", "\x81\x6F", "\x81\x62", "\x81\x70",
    "\x81\x60", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40",
    "\x81\x40", "\x81\x40", "\x81\x40", "\x81\x40"
};

const s8* src_han_kata[128] = {
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x2D\x00", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x30\x00", "\x31\x00", "\x32\x00", "\x33\x00", "\x34\x00", "\x35\x00", "\x36\x00", "\x37\x00", "\x38\x00",
    "\x39\x00", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F"
};

const s8* src_han_alpha[128] = {
    "\x61\x00", "\x62\x00", "\x63\x00", "\x64\x00", "\x65\x00", "\x66\x00", "\x67\x00", "\x68\x00", "\x69\x00",
    "\x6A\x00", "\x6B\x00", "\x6C\x00", "\x6D\x00", "\x6E\x00", "\x6F\x00", "\x70\x00", "\x71\x00", "\x72\x00",
    "\x73\x00", "\x74\x00", "\x75\x00", "\x76\x00", "\x77\x00", "\x78\x00", "\x79\x00", "\x7A\x00", "\x21\x00",
    "\x3F\x00", "\x2E\x00", "\x2C\x00", "\x22\x00", "\x27\x00", "\x41\x00", "\x42\x00", "\x43\x00", "\x44\x00",
    "\x45\x00", "\x46\x00", "\x47\x00", "\x48\x00", "\x49\x00", "\x4A\x00", "\x4B\x00", "\x4C\x00", "\x4D\x00",
    "\x4E\x00", "\x4F\x00", "\x50\x00", "\x51\x00", "\x52\x00", "\x53\x00", "\x54\x00", "\x55\x00", "\x56\x00",
    "\x57\x00", "\x58\x00", "\x59\x00", "\x5A\x00", "\x22\x00", "\x24\x00", "\x25\x00", "\x26\x00", "\xA2\x00",
    "\xA3\x00", "\x28\x00", "\x29\x00", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x3A\x00", "\x23\x00", "\x3B\x00", "\x2F\x00", "\x5E\x44", "\x2B\x00",
    "\xA5\x00", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F"
};

const s8* src_han_alpha2[128] = {
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x25\x41", "\x29\x41", "\x28\x41", "\x5E\x41", "\x5E\x5F", "\x7E\x41", "\x5E\x5F",
    "\x2C\x43", "\x25\x45", "\x29\x45", "\x28\x45", "\x5E\x45", "\x25\x49", "\x29\x49", "\x28\x49", "\x5E\x49",
    "\x5E\x5F", "\x7E\x4E", "\x25\x4F", "\x29\x4F", "\x28\x4F", "\x5E\x4F", "\x7E\x4F", "\x5E\x5F", "\x25\x55",
    "\x29\x55", "\x28\x55", "\x5E\x55", "\x5E\x5F", "\x25\x61", "\x29\x61", "\x28\x61", "\x5E\x61", "\x5E\x5F",
    "\x7E\x61", "\x5E\x5F", "\x2C\x63", "\x25\x65", "\x29\x65", "\x28\x65", "\x5E\x65", "\x25\x69", "\x29\x69",
    "\x28\x69", "\x5E\x69", "\x5E\x5F", "\x7E\x6E", "\x5E\x5F", "\x25\x6F", "\x29\x6F", "\x28\x6F", "\x5E\x6F",
    "\x7E\x6F", "\x5E\x5F", "\x25\x75", "\x29\x75", "\x28\x75", "\x5E\x75", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F", "\x5E\x5F",
    "\x5E\x5F", "\x5E\x5F"
};

const s8* src_zen_comm[128] = {
    "\x55\x50", "\x52\x55", "\x52\x54", "\x52\x44", "\x44\x57", "\x4C\x44", "\x4C\x54", "\x4C\x55", "\x81\x51",
    "\x43\x50", "\x43\x4B", "\x4C\x31", "\x4C\x32", "\x4C\x33", "\x43\x31", "\x43\x32", "\x43\x33", "\x4B\x31",
    "\x4B\x32", "\x82\x4F", "\x82\x50", "\x82\x51", "\x82\x52", "\x82\x53", "\x82\x54", "\x82\x55", "\x82\x56",
    "\x82\x57", "\x82\x58", "\x81\x46", "\x8F\x9C", "\x93\x8A", "\x82\x60", "\x82\x61", "\x82\x62", "\x82\x63",
    "\x82\x64", "\x82\x65", "\x82\x66", "\x82\x67", "\x82\x68", "\x82\x69", "\x82\x6A", "\x82\x6B", "\x82\x6C",
    "\x82\x6D", "\x82\x6E", "\x82\x6F", "\x82\x70", "\x82\x71", "\x82\x72", "\x82\x73", "\x82\x74", "\x82\x75",
    "\x82\x76", "\x82\x77", "\x82\x78", "\x82\x79", "\x81\x51", "\x81\x51", "\x81\x51", "\x8E\xAF", "\x8B\x97",
    "\x8D\xED", "\x8D\x58", "\x94\xEF", "\x8C\xFC", "\x8D\xB6", "\x89\x45", "\x90\x81", "\x81\x7B", "\x81\xAB",
    "\x81\xA8", "\x87\x56", "\x81\x6D", "\x81\x6E", "\x87\x55", "\x81\x61", "\x8A\xA8", "\x90\x8B", "\x8A\x44",
    "\x92\x51", "\x8F\x6E", "\x89\x89", "\x96\x7D", "\x8E\x70", "\x82\x92", "\x90\xAD", "\x8B\x73", "\x8F\x8F",
    "\x96\xC0", "\x89\x80", "\x8D\x80", "\x88\xD5", "\x93\x6F", "\x98\x5E", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51"
};

const s8* src_zen_hira[128] = {
    "\x82\xA0", "\x82\xA2", "\x82\xA4", "\x82\xA6", "\x82\xA8", "\x82\xA9", "\x82\xAB", "\x82\xAD", "\x82\xAF",
    "\x82\xB1", "\x82\xB3", "\x82\xB5", "\x82\xB7", "\x82\xB9", "\x82\xBB", "\x82\xBD", "\x82\xBF", "\x82\xC2",
    "\x82\xC4", "\x82\xC6", "\x82\xC8", "\x82\xC9", "\x82\xCA", "\x82\xCB", "\x82\xCC", "\x82\xCD", "\x82\xD0",
    "\x82\xD3", "\x82\xD6", "\x82\xD9", "\x82\xDC", "\x82\xDD", "\x82\xDE", "\x82\xDF", "\x82\xE0", "\x82\xE2",
    "\x82\xE4", "\x82\xE6", "\x82\xE7", "\x82\xE8", "\x82\xE9", "\x82\xEA", "\x82\xEB", "\x82\xED", "\x82\xF0",
    "\x82\xF1", "\x82\x9F", "\x82\xA1", "\x82\xA3", "\x82\xA5", "\x82\xA7", "\x82\xC1", "\x82\xE1", "\x82\xE3",
    "\x82\xE5", "\x81\x41", "\x81\x42", "\x81\x49", "\x81\x75", "\x81\x76", "\x81\x48", "\x81\x45", "\x82\xAA",
    "\x82\xAC", "\x82\xAE", "\x82\xB0", "\x82\xB2", "\x82\xB4", "\x82\xB6", "\x82\xB8", "\x82\xBA", "\x82\xBC",
    "\x82\xBE", "\x82\xC0", "\x82\xC3", "\x82\xC5", "\x82\xC7", "\x82\xCE", "\x82\xD1", "\x82\xD4", "\x82\xD7",
    "\x82\xDA", "\x82\xCF", "\x82\xD2", "\x82\xD5", "\x82\xD8", "\x82\xDB", "\x81\x63", "\xA5\xA5", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51"
};

const s8* src_zen_kata[128] = {
    "\x83\x41", "\x83\x43", "\x83\x45", "\x83\x47", "\x83\x49", "\x83\x4A", "\x83\x4C", "\x83\x4E", "\x83\x50",
    "\x83\x52", "\x83\x54", "\x83\x56", "\x83\x58", "\x83\x5A", "\x83\x5C", "\x83\x5E", "\x83\x60", "\x83\x63",
    "\x83\x65", "\x83\x67", "\x83\x69", "\x83\x6A", "\x83\x6B", "\x83\x6C", "\x83\x6D", "\x83\x6E", "\x83\x71",
    "\x83\x74", "\x83\x77", "\x83\x7A", "\x83\x7D", "\x83\x7E", "\x83\x80", "\x83\x81", "\x83\x82", "\x83\x84",
    "\x83\x86", "\x83\x88", "\x83\x89", "\x83\x8A", "\x83\x8B", "\x83\x8C", "\x83\x8D", "\x83\x8F", "\x83\x92",
    "\x83\x93", "\x83\x40", "\x83\x42", "\x83\x44", "\x83\x46", "\x83\x48", "\x83\x62", "\x83\x83", "\x83\x85",
    "\x83\x87", "\x81\x5B", "\x83\x4B", "\x83\x4D", "\x83\x4F", "\x83\x51", "\x83\x53", "\x83\x55", "\x83\x57",
    "\x83\x59", "\x83\x5B", "\x83\x5D", "\x83\x5F", "\x83\x61", "\x83\x64", "\x83\x66", "\x83\x68", "\x83\x6F",
    "\x83\x72", "\x83\x75", "\x83\x78", "\x83\x7B", "\x83\x70", "\x83\x73", "\x83\x76", "\x83\x79", "\x83\x7C",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x81\x51", "\x81\x51"
};

const s8* src_zen_kan0[128] = {
    "\x20\x20", "\x88\xEA", "\x93\xF1", "\x8F\x5C", "\x95\x53", "\x8C\x4E", "\x91\x53", "\x94\x5C", "\x97\x4A",
    "\x9F\x54", "\x8F\xAD", "\x89\xF0", "\x90\xAF", "\x81\x58", "\x89\x69", "\x8E\x8A", "\x8D\x82", "\x8D\xB7",
    "\x96\x68", "\x8F\xE1", "\x8C\xC0", "\x91\xE0", "\x92\xA3", "\x8E\xE3", "\x8B\xAD", "\x90\x88", "\x93\xAE",
    "\x90\x53", "\x89\xE6", "\x8F\x87", "\x97\x5D", "\x8E\xA9", "\x8E\xC0", "\x88\xC8", "\x8D\x62", "\x94\xE3",
    "\x94\xAD", "\x8C\xF8", "\x91\x4F", "\x94\xFC", "\x91\x50", "\x88\xF9", "\x94\xD1", "\x8A\xD9", "\x96\x4F",
    "\x8D\x48", "\x94\xBC", "\x95\x4B", "\x90\xC3", "\x9A\xF8", "\x92\x5A", "\x94\x4D", "\x92\xBC", "\x90\x5E",
    "\x92\x50", "\x8C\xB5", "\x89\x68", "\x97\x5F", "\x98\x4A", "\x8A\x77", "\x8A\x6F", "\x94\xD4", "\x91\x52",
    "\x93\x96", "\x8F\x8A", "\x91\x81", "\x8D\x4E", "\x93\x49", "\x91\xBD", "\x89\xEB", "\x90\xCE", "\x8F\x64",
    "\x95\xCA", "\x90\x91", "\x93\xCD", "\x97\xF0", "\x8C\xB4", "\x88\xB3", "\x8B\xFC", "\x94\xF6", "\x89\xAE",
    "\x96\xDF", "\x8E\x68", "\x81\x51", "\x81\x51", "\x92\x85", "\x91\xB6", "\x8D\xDD", "\x90\xA2", "\x8A\x45",
    "\x89\xE4", "\x8E\x76", "\x94\x4E", "\x95\xAA", "\x90\xD8", "\x98\x48", "\x97\x78", "\x93\xA5", "\x91\x48",
    "\x97\x76", "\x93\x77", "\x95\xD0", "\x8B\xC6", "\x95\x94", "\x91\x5F", "\x81\x51", "\x97\xA2", "\x81\x51",
    "\x95\x97", "\x8A\x6A", "\x97\x6C", "\x8A\x69", "\x94\xC2", "\x90\xCD", "\x91\x8A", "\x8B\xC9", "\x8D\x5C",
    "\x95\xBF", "\x95\x57", "\x8C\xA0", "\x8D\xAA", "\x94\x74", "\x98\x4F", "\x90\xE6", "\x89\xC1", "\x94\x77",
    "\x8E\x6A", "\x94\xF2"
};

const s8* src_zen_kan1[128] = {
    "\x8D\xA0", "\x81\x51", "\x97\x7E", "\x96\x5D", "\x8A\xE8", "\x90\x94", "\x92\x69", "\x8A\x74", "\x88\xC5",
    "\x8A\xD4", "\x93\xAC", "\x96\xE2", "\x95\xB7", "\x8A\x4A", "\x96\xE5", "\x8A\xC8", "\x8B\x40", "\x81\x51",
    "\x81\x51", "\x91\xE8", "\x88\xD0", "\x8F\xA0", "\x81\x51", "\x8D\x8F", "\x8B\xF0", "\x81\x51", "\x8E\x78",
    "\x94\x7A", "\x8F\x75", "\x96\xB0", "\x8A\xE1", "\x93\xB5", "\x97\x5E", "\x90\x47", "\x91\xCE", "\x93\x47",
    "\x81\x51", "\x8A\xF9", "\x8A\x4F", "\x90\x6B", "\x89\xA9", "\x90\xF2", "\x99\x8B", "\x93\xDF", "\x96\xBD",
    "\x8A\xAE", "\x92\xE8", "\x96\xA7", "\x8E\xBA", "\x93\xCB", "\x8E\xE7", "\x89\xC6", "\x88\xC0", "\x8B\xF3",
    "\x90\x51", "\x88\xC4", "\x8B\x86", "\x8A\xF1", "\x90\x67", "\x96\x88", "\x8A\x79", "\x8B\xD9", "\x95\x89",
    "\x8E\xE6", "\x89\xA3", "\xE6\xC8", "\x94\x73", "\x91\xA1", "\x91\x47", "\x8B\xEC", "\x8C\xB1", "\x91\x9B",
    "\x81\x51", "\x97\xB6", "\x8C\xDD", "\x99\xE9", "\x81\x51", "\x93\x9A", "\x8E\xF3", "\x88\xA4", "\x81\x51",
    "\x97\xCA", "\x8E\x59", "\x95\x69", "\x97\x88", "\x8C\x52", "\x8E\x51", "\x8D\x6C", "\x81\x51", "\x90\x48",
    "\x81\x51", "\x8B\x4E", "\x8E\xEF", "\x89\x7A", "\x89\x73", "\x93\xDD", "\x94\xAB", "\x93\x53", "\x92\x62",
    "\x8D\x7C", "\x8E\xB2", "\x8C\x79", "\x8C\x95", "\x94\x6E", "\x8B\xB6", "\x8D\xD0", "\x8C\xBB", "\x97\x9D",
    "\x8F\xEA", "\x92\x6E", "\x91\x9D", "\x89\xF3", "\x96\x84", "\x8B\xAB", "\x81\x51", "\x88\xF8", "\x95\xC7",
    "\x81\x51", "\x97\x4C", "\x93\xEF", "\x8D\xA1", "\x8A\xE9", "\x89\xEF", "\x97\x63", "\x8A\xAA", "\x8B\x81",
    "\x95\xCF", "\x92\xC9"
};

const s8* src_zen_kan2[128] = {
    "\x96\xFC", "\x94\xE6", "\x90\x4A", "\x90\xF5", "\x8B\xC1", "\x81\x51", "\x8E\x74", "\x90\xAC", "\x8E\xD2",
    "\x8C\xC4", "\x8A\x90", "\x96\xA1", "\x89\x5C", "\x8F\xA5", "\x8D\xC5", "\x91\xD6", "\x81\x51", "\x8D\x4B",
    "\x81\x51", "\x8F\xF0", "\x8C\xF5", "\x90\xC2", "\x95\xE0", "\x97\x70", "\x81\x51", "\x92\x44", "\x91\x9E",
    "\x90\xC9", "\x89\xF5", "\x89\xAF", "\x89\xF6", "\x89\xF7", "\x93\xB2", "\x9C\xE0", "\x94\x59", "\x97\xF7",
    "\x90\xAB", "\x8C\xE5", "\x91\x66", "\x97\xDE", "\x98\x56", "\x8F\x91", "\x8E\x80", "\x88\xAB", "\x8E\x45",
    "\x8E\xD7", "\x81\x51", "\x89\x93", "\x93\xB9", "\x93\xA6", "\x91\x97", "\x95\xD4", "\x91\xDE", "\x92\x42",
    "\x91\x49", "\x92\xCA", "\x98\x41", "\x8B\xDF", "\x97\x56", "\x92\xC7", "\x8F\x54", "\x8B\xF6", "\x91\xA2",
    "\x8D\x9E", "\x90\x69", "\x8B\x74", "\x88\xE2", "\x88\xE1", "\x89\xDF", "\x81\x51", "\x91\xA9", "\x97\xAF",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x8B\x5E", "\x97\xA3", "\x8F\x89", "\x90\x5F", "\x97\x54", "\x95\x9F",
    "\x8E\xD0", "\x95\xB1", "\x8C\x68", "\x95\x5C", "\x8F\x5B", "\x81\x51", "\x81\x51", "\x81\x51", "\x91\x90",
    "\x8E\xE1", "\x97\x8E", "\x97\x74", "\x92\x83", "\x8B\xEA", "\x91\x92", "\x89\xD4", "\x96\x46", "\x96\xB2",
    "\x92\x7E", "\x8C\x7C", "\x94\x96", "\x89\xD8", "\x89\x70", "\x81\x51", "\x8E\xA6", "\x90\xA7", "\x81\x51",
    "\x81\x51", "\x8F\xAB", "\x95\xF6", "\x8C\x80", "\x8B\xA4", "\x8B\xBB", "\x97\xE2", "\x8E\x9F", "\x8F\xB5",
    "\x8A\xB7", "\x89\x9F", "\x92\x54", "\x8B\x5A", "\x94\xB2", "\x92\xF1", "\x95\xF8", "\x8E\x9D", "\x91\xB9",
    "\x8D\x89", "\x8B\x91"
};

const s8* src_zen_kan3[128] = {
    "\x8E\x77", "\x9D\x86", "\x90\x55", "\x8D\x54", "\x8E\xCC", "\x91\xF0", "\x8A\x7C", "\x8B\xB3", "\x96\xEC",
    "\x98\x59", "\x8D\x81", "\x81\x51", "\x81\x51", "\x95\x7E", "\x8F\xB8", "\x97\xB4", "\x8C\x9D", "\x8D\x55",
    "\x8C\x82", "\x90\x65", "\x90\x56", "\x90\xB0", "\x88\xC3", "\x89\x66", "\x89\xC9", "\x96\xBE", "\x8E\x9E",
    "\x90\x58", "\x8A\xE6", "\x97\xBC", "\x81\x51", "\x8A\xBD", "\x90\xBA", "\x8A\x84", "\x8E\x63", "\x97\xF1",
    "\x89\x98", "\x8B\xB5", "\x93\x68", "\x8A\x88", "\x8B\x83", "\x92\xAA", "\x8C\xCE", "\x8C\x88", "\x8F\xC1",
    "\x97\xAC", "\x8C\xB8", "\x91\xAA", "\x8A\x8A", "\x95\xA6", "\x96\xC5", "\x90\x5B", "\x93\x6E", "\x8A\x43",
    "\x90\xF6", "\x96\x40", "\x90\x9F", "\x94\x68", "\x8C\x83", "\x92\x8D", "\x96\x9E", "\x96\xDA", "\x81\x51",
    "\x8E\xD4", "\x8E\xE5", "\x89\xA4", "\x8C\xDF", "\x8B\x8E", "\x8B\x79", "\x8E\xB8", "\x81\x51", "\x95\xBA",
    "\x8C\x87", "\x91\x96", "\x97\xB3", "\x89\xCA", "\x81\x51", "\x88\xDB", "\x90\xE2", "\x91\x67", "\x8F\x49",
    "\x96\xF1", "\x93\x9D", "\x8C\x70", "\x90\x44", "\x90\x61", "\x8C\x8B", "\x97\xFB", "\x91\xB1", "\x95\x82",
    "\x8D\x67", "\x8D\xD7", "\x95\xD2", "\x8B\x49", "\x90\xFC", "\x8F\x83", "\x94\x5B", "\x96\xC8", "\x89\xF1",
    "\x8C\xFB", "\x8B\xA5", "\x8D\xA2", "\x92\x63", "\x8D\x91", "\x88\xF6", "\x81\x51", "\x93\xFA", "\x8A\xC3",
    "\x94\x92", "\x93\xAF", "\x97\x52", "\x93\xE0", "\x81\x51", "\x96\xCA", "\x81\x51", "\x93\x56", "\x92\x6A",
    "\x8A\x65", "\x8F\xE3", "\x97\xCD", "\x91\xE5", "\x89\xC2", "\x8F\x6F", "\x8E\x67", "\x97\x62", "\x96\x54",
    "\x8B\xC2", "\x94\x7B"
};

const s8* src_zen_kan4[128] = {
    "\x97\x44", "\x8E\x64", "\x93\x7C", "\x8F\x43", "\x81\x51", "\x96\x6C", "\x91\x9C", "\x8E\x97", "\x90\xE5",
    "\x95\x74", "\x91\x6D", "\x8F\xE4", "\x95\x76", "\x96\xA2", "\x81\x51", "\x96\x7B", "\x81\x51", "\x8D\x90",
    "\x89\xCE", "\x81\x51", "\x8E\xE8", "\x97\xB9", "\x97\x5C", "\x91\xAB", "\x96\xBC", "\x92\x86", "\x8E\x6D",
    "\x81\x51", "\x95\x73", "\x93\xAA", "\x96\xD1", "\x91\xB2", "\x97\xA6", "\x95\xC4", "\x81\x51", "\x88\xCA",
    "\x8B\x9F", "\x91\xCC", "\x8C\x8F", "\x90\x4D", "\x81\x51", "\x8D\xEC", "\x81\x51", "\x89\xBC", "\x92\x6C",
    "\x94\x43", "\x93\x60", "\x89\xB4", "\x89\xBD", "\x8B\x78", "\x89\xBF", "\x8C\x92", "\x8F\x97", "\x8E\x71",
    "\x95\x83", "\x8C\x5A", "\x95\xEA", "\x94\xDE", "\x8C\xB3", "\x8C\x8C", "\x8B\x43", "\x8F\xAC", "\x97\x46",
    "\x90\x85", "\x92\x6D", "\x90\xB6", "\x8D\x73", "\x95\xC0", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51",
    "\x94\x79", "\x92\xB7", "\x96\xE9", "\x88\xDA", "\x97\x98", "\x95\x62", "\x90\xCF", "\x8E\xED", "\x94\xE9",
    "\x92\xF6", "\x8C\x6D", "\x8A\x6E", "\x8E\x84", "\x8E\x50", "\x89\xBA", "\x93\xFC", "\x90\x6C", "\x88\xF5",
    "\x81\x51", "\x81\x51", "\x8E\x7E", "\x8D\xCB", "\x81\x51", "\x81\x51", "\x8A\xE7", "\x8C\xA9", "\x8D\xC4",
    "\x95\xB6", "\x8B\xE5", "\x8D\x87", "\x90\xB3", "\x8C\xBE", "\x97\xA7", "\x81\x51", "\x95\xFB", "\x90\xAA",
    "\x8C\xE4", "\x96\xF0", "\x8A\x58", "\x8F\x70", "\x91\xD2", "\x93\xBE", "\x95\x9C", "\x8F\xD5", "\x8F\x5D",
    "\x81\x51", "\x8C\xE3", "\x91\xCF", "\x97\x92", "\x91\xFA", "\x8F\xE6", "\x8C\x7A", "\x8E\xFB", "\x8D\xD5",
    "\x81\x51", "\x81\x51"
};

const s8* src_zen_kan5[128] = {
    "\x89\xC4", "\x93\x7E", "\x8E\xCA", "\x93\xC1", "\x95\xA8", "\x91\xB0", "\x95\xD7", "\x90\xCC", "\x8A\xEF",
    "\x81\x51", "\x81\x51", "\x92\xED", "\x81\x51", "\x81\x51", "\x91\x7A", "\x8E\x9C", "\x94\xDF", "\x96\x59",
    "\x94\x4F", "\x88\xD3", "\x94\x45", "\x81\x51", "\x8B\x7D", "\x91\xD4", "\x97\x49", "\x8A\xB4", "\x8C\x65",
    "\x93\x7B", "\x8F\xA4", "\x94\x84", "\x8B\x4D", "\x8A\xED", "\x81\x51", "\x81\x51", "\x8B\x41", "\x81\x51",
    "\x97\x45", "\x94\x65", "\x8A\xEC", "\x81\x51", "\xE0\x75", "\x94\x9A", "\x8F\xC4", "\x81\x51", "\x96\xB3",
    "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x81\x51", "\x8A\x6D", "\x94\x6A", "\x8C\xA4", "\x96\x43",
    "\x8D\x64", "\x8F\x58", "\x8B\xC7", "\x8F\x57", "\x8F\xB3", "\x81\x51", "\x81\x51", "\x81\x51", "\x8C\x76",
    "\x98\x5F", "\x8E\x8E", "\x8C\x50", "\x8C\xD6", "\x92\x6B", "\x90\xE0", "\x8B\x96", "\x90\xDD", "\x89\xDB",
    "\x94\x46", "\x8C\xEA", "\x92\x61", "\x89\x79", "\x93\xC7", "\x92\xB2", "\x8E\xD3", "\x98\x62", "\x8F\xF7",
    "\x95\x5D", "\x81\x51", "\x96\x64", "\x8B\x4C", "\x8A\xCF", "\x91\x44", "\x89\x65", "\x81\x51", "\x90\x6E",
    "\x81\x51", "\x8F\x95", "\x8C\xCC", "\x8B\xBD", "\x89\x9E", "\x93\x78", "\x8D\x4C", "\x8D\xC0", "\x95\x85",
    "\x81\x51", "\x8E\xAD", "\x96\x82", "\x96\x80", "\x81\x51", "\x8D\x8C", "\x94\xCD", "\x95\x90", "\x8A\xC5",
    "\x97\x8A", "\x97\xC2", "\x81\x51", "\x8A\x46", "\x8F\xE7", "\x96\x45", "\x98\x72", "\x92\x5F", "\x93\xB7",
    "\x94\x5D", "\x95\x9E", "\x91\xD9", "\x96\xAC", "\x8F\x9F", "\x8B\x72", "\x93\xD8", "\x95\x47", "\x90\xC6",
    "\x8E\x88", "\x8D\x98"
};

const s8* src_zen_kan6[128] = {
    "\x8E\x96", "\x91\x95", "\x97\x97", "\x81\x51", "\x81\x51", "\x90\xB7", "\x8A\xF3", "\x81\x51", "\x8E\x6F",
    "\x8C\x99", "\x8F\xEC", "\x8D\x44", "\x8A\xF0", "\x8E\x6E", "\x94\x40", "\x96\xAD", "\x8D\xB8", "\x8E\x55",
    "\x8F\xED", "\x8C\xE0", "\x8D\x86", "\x8F\x88", "\xE0\xF8", "\x90\xED", "\x8F\xF3", "\x82\x6A", "\x82\x6E",
    "\x82\x60", "\x82\x74", "\x82\x72", "\x82\x73", "\x82\x67", "\x82\x78", "\x82\x77", "\x82\x76", "\x81\x44",
    "\x82\x6F", "\x81\x93", "\x83\x94", "\x81\x77", "\x81\x78", "\x81\x69", "\x81\x6A", "\x81\x64", "\x81\x5C",
    "\x8A\xFA", "\x81\x60", "\x8B\x50", "\x95\xF1", "\x8E\x8B", "\x8B\x52", "\x92\x70", "\x93\x73", "\x96\x9C",
    "\x8D\xFB", "\x91\xF5", "\x8E\xF6", "\x90\xD5", "\x92\xAD", "\x90\x46", "\x93\x59", "\x96\x96", "\x93\x99",
    "\x8F\xEE", "\x8A\xFC", "\x92\x4E", "\x97\x65", "\x8E\xCD", "\x96\x58", "\x96\xBA", "\x8C\xF3", "\x95\xE2",
    "\x97\xC7", "\x96\xFB", "\x92\x66", "\x8B\xD8", "\x93\xF7", "\x90\xA8", "\x92\xE9", "\x93\x71", "\x8C\x5E",
    "\x88\xB5", "\x91\xBC", "\x8F\xD8", "\x93\x72", "\x92\x5B", "\x93\x5F", "\x8A\x70", "\x91\xC5", "\x92\xB5",
    "\x8A\xEE", "\x91\x62", "\x8F\x52", "\x8D\xA6", "\x96\x81", "\x90\xB8", "\x8B\x71", "\x96\x56", "\x8D\x72",
    "\x93\x64", "\x91\x80", "\x8D\xF0", "\x91\xA7", "\x92\xA4", "\x8B\xB0", "\x92\x89", "\x95\xDF", "\x91\x61",
    "\x8D\xDF", "\x94\xBD", "\x92\xEA", "\xE3\x6B", "\x8B\x46", "\x8F\x4B", "\x96\x6B", "\x8E\x91", "\x8E\xBF",
    "\x8C\x60", "\x97\xE7", "\x90\xDF", "\x97\xED", "\x8A\xAC", "\x8F\x68", "\x8A\xCC", "\x89\xC8", "\x8F\xBB",
    "\x94\x52", "\x91\xA4"
};

const s8* src_zen_kan7[128] = {
    "\x8A\xEB", "\x8C\xAF", "\x90\x8C", "\x95\xA5", "\x89\xCC", "\x95\xB2", "\x8D\xD3", "\x93\x4F", "\x8D\x9C",
    "\x8F\x74", "\x93\xE4", "\x8D\x60", "\x92\x9A", "\x94\x4A", "\x97\x55", "\x89\xBB", "\x8F\x8B", "\x89\x8A",
    "\x90\x7D", "\x94\xC6", "\x8B\xE0", "\x94\xAF", "\x8B\x63", "\x96\xE1", "\x8E\x5A", "\x92\xEB", "\x89\xB9",
    "\x91\xAC", "\x91\xBE", "\x97\x7A", "\x97\x81", "\x8F\x5A", "\x92\xA9", "\x91\x4E", "\x8B\x7A", "\x97\xBF",
    "\x90\x4C", "\x97\x61", "\x8E\x9A", "\x90\x73", "\x93\x7A", "\x91\xE6", "\x97\x90", "\x8E\x47", "\x93\x90",
    "\x8D\xB2", "\x8B\x6C", "\x96\x9D", "\x8A\xD6", "\x82\x75", "\x94\xF0", "\x89\x42", "\x91\xCA", "\x94\x5A",
    "\x96\xF4", "\x8A\xA2", "\x96\x87", "\x8A\x7A", "\x8E\xA1", "\x92\x48", "\x92\x8E", "\xE6\xEC", "\x93\xF5",
    "\x96\xF9", "\x91\xAD", "\x8A\x75", "\x88\xD7", "\x8C\x8E", "\x94\x50", "\x92\xD7", "\xE9\x78", "\x8A\xC7",
    "\x90\x6F", "\x8C\xC8", "\x8C\xB9", "\x8D\x96", "\x90\xD4", "\x8C\xEC", "\x8B\x53", "\x8E\xBD", "\x8D\x95",
    "\x8E\x6C", "\x8A\xB3", "\x95\xA7", "\x94\xB1", "\x8B\x80", "\x9D\x7C", "\x91\x6A", "\x89\x4A", "\x95\xB4",
    "\x94\x67", "\x97\x85", "\x89\x83", "\x8E\x72", "\x90\xE1", "\x8E\x4E", "\x98\xF8", "\x99\x53", "\x96\x5C",
    "\x8D\xCF", "\x92\x78", "\x8B\x47", "\x95\x91", "\x91\xE4", "\x94\xBB", "\x91\xA5", "\x8B\x56", "\x89\xC5",
    "\x92\x87", "\x8B\xC8", "\x8C\xC3", "\x92\xBF", "\x89\x84", "\x8F\x9D", "\x89\xFC", "\x94\xD8", "\x8A\xF5",
    "\x97\xC1", "\x9C\xDF", "\x96\x53", "\x97\xEC", "\x89\x52", "\x91\x88", "\x81\x51", "\x81\x84", "\x93\x9E",
    "\xE7\x80", "\x93\x79"
};

MessageTable** mess_tables[6] = { pl_mes_tbl, pl_tlk_tbl, pl_end_tbl, msgSysDirTbl, msgExtraTbl, msgMenuTbl };

const s8** han_adrs[3] = { src_han_kata, src_han_alpha, src_han_alpha2 };

const s8** zen_adrs[11] = { src_zen_comm, src_zen_hira, src_zen_kata, src_zen_kan0, src_zen_kan1, src_zen_kan2,
                            src_zen_kan3, src_zen_kan4, src_zen_kan5, src_zen_kan6, src_zen_kan7 };

void effect_B6_move(WORK_Other_CONN* ewk) {
#if defined(TARGET_PS2)
    void get_message_conn_data(WORK_Other_CONN * ewk, s32 kind, s32 pl, s32 msg);
#endif

    switch (ewk->wu.routine_no[0]) {
    case 0:
        ewk->wu.routine_no[0]++;
        ewk->wu.my_mts = 12;
        ewk->wu.my_family = 1;
        ewk->wu.position_z = ewk->wu.my_priority = 1;
        break;

    case 1:
        if (ewk->wu.dead_f == 1) {
            ewk->wu.disp_flag = 0;
            ewk->wu.routine_no[0] = 9;
            break;
        }

        ewk->wu.my_col_code = ot_int[1];
        ewk->wu.position_x = ot_pat[0];
        ewk->wu.position_y = ot_pat[1];

        switch (ewk->wu.routine_no[1]) {
        case 0:
            ewk->wu.routine_no[1]++;
            ot_mot[0] = *ot_cgf;
            ot_mot_of[0] = ot_all_of[0];
            ot_mot_of[1] = ot_all_of[1];
            get_message_conn_data(ewk, ot_mot[0], ot_mot_of[0], ot_mot_of[1]);
            ewk->wu.disp_flag = 1;
            break;

        case 1:
            if (ot_mot[1]) {
                ewk->wu.routine_no[1] = 0;
            }

            break;
        }

        sort_push_request3(&ewk->wu);
        break;

    default:
        push_effect_work(&ewk->wu);
        break;
    }
}

void get_message_conn_data(WORK_Other_CONN* ewk, s16 kind, s16 pl, s16 msg) {
    u8** msghead;
    u8* msgtbl;
    s32 msgline;
    s32 slideX;
    s32 slideY;
    s32 currX;
    s32 currY;
    s32 i;
    s32 hzsel;
    s32 space;
    s32 hzflag;
    s32 bytes;
    s32 mjcnt;
    u16 objnum;

    s32 assign;

    currX = 0;
    currY = 0;
    mjcnt = 0;
    slideX = 8;
    assign = -16;
    slideY = assign;
    hzsel = 0;

    if (msg >= 0xFF) {
        return;
    }

    msghead = (u8**)mess_tables[kind][pl]->msgAdr[msg];
    msgline = mess_tables[kind][pl]->msgNum[msg];

    for (i = 0; i < msgline; i++) {
        for (msgtbl = msghead[i]; *msgtbl; msgtbl += bytes) {
            bytes = msgConvertObjNum(msgtbl, &space, &hzflag, &objnum, hzsel);

            if (!space) {
                ewk->conn[mjcnt].nx = currX;
                ewk->conn[mjcnt].ny = currY;
                ewk->conn[mjcnt].col = 0;
                ewk->conn[mjcnt].chr = objnum;
                mjcnt++;

                if (mjcnt > 108) {
                    while (1) {
                        // do nothing
                    }
                }
            }

            if (hzflag) {
                currX += slideX * 2;
            } else {
                currX += slideX;
            }
        }

        currX = 0;
        currY += slideY;
    }

    ewk->num_of_conn = mjcnt;
}

s32 msgConvertObjNum(u8* moji, s32* spc, s32* hz, u16* num, u8 hzSel) {
    u8 tmpstr[4];
    s32 i;
    s32 j;
    s32 rnum;
    s32 mjix = 0;

    if (hzSel != 0) {
        tmpstr[0] = moji[0];
        tmpstr[1] = moji[1];
        tmpstr[2] = 0;

        if (tmpstr[0] == ' ') {
            goto one;
        }

        if (strcmp(&tmpstr[0], "\x62\x68") == 0) {
            goto two;
        }

        if (strcmp(&tmpstr[0], "\x81\x40") == 0 || strcmp(&tmpstr[0], "\x81\x51") == 0) {
            goto three;
        }

        if (msgCheckCodeSize(tmpstr[0]) == 1) {
            tmpstr[1] = ((u8**)src_han_zen_conv)[tmpstr[0]][1];
            tmpstr[0] = ((u8**)src_han_zen_conv)[tmpstr[0]][0];

            for (i = 0; i < 3; i++) {
                for (j = 0; j < 128; j++) {
                    if (strcmp(&tmpstr[0], han_adrs[i][j]) != 0) {
                        continue;
                    }

                    *hz = 0;
                    *spc = 0;
                    *num = j + (i * 128) + 0x7F30;
                    return 1;
                }
            }
        }

        for (i = 0; i < 11; i++) {
            for (j = 0; j < 128; j++) {
                if (strcmp(&tmpstr[0], zen_adrs[i][j]) != 0) {
                    continue;
                }

                *hz = 1;
                *spc = 0;
                *num = j + (i * 128) + 0x80B0;
                return 2;
            }
        }

        goto three;
    }

    if (moji[0] == 0x5E) {
        tmpstr[0] = moji[0];
        tmpstr[1] = moji[1];
        tmpstr[2] = 0;
        rnum = 2;
    } else {
        tmpstr[0] = moji[0];
        tmpstr[1] = 0;
        rnum = 1;
    }

    if (tmpstr[0] == ' ') {
        goto one;
    }

    for (i = 0; i < 2; i++) {
        for (j = 0; j < 128; j++) {
            if (strcmp(&tmpstr[0], han_adrs[i][j]) != 0) {
                continue;
            }

            *hz = 0;
            *spc = 0;
            *num = j + (i * 128) + 0x7F30;
            return rnum;
        }
    }

one:
    *hz = 0;
    *spc = 1;
    *num = 0;
    return 1;

two:
    *hz = 0;
    *spc = 1;
    *num = 0;
    return 2;

three:
    *hz = 1;
    *spc = 1;
    *num = 0;
    return 2;
}

s32 msgCheckCodeSize(u8 data) {
    if (data >= 128 && data < 160) {
        return 2;
    }

    if (data >= 224) {
        return 2;
    }

    return 1;
}
