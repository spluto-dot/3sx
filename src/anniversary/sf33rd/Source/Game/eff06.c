#include "sf33rd/Source/Game/eff06.h"
#include "common.h"
#include "sf33rd/Source/Game/CHARSET.h"
#include "sf33rd/Source/Game/EFFECT.h"
#include "sf33rd/Source/Game/aboutspr.h"
#include "sf33rd/Source/Game/bg.h"
#include "sf33rd/Source/Game/eff05.h"
#include "sf33rd/Source/Game/ta_sub.h"

const s16 *scr_obj_data6[22] = { st0000_data_tbl,  st0100_data_tbl,  st0200_data_tbl, stg_dum_data_tbl, st0400_data_tbl,
                                 st0500_data_tbl,  stg_dum_data_tbl, st0700_data_tbl, st0800_data_tbl,  st0900_data_tbl,
                                 st0A00_data_tbl,  st0B00_data_tbl,  st0c00_data_tbl, st0100_data_tbl,  st0e00_data_tbl,
                                 st1000_data_tbl,  st1100_data_tbl,  st0500_data_tbl, st1300_data_tbl,  st1400_data_tbl,
                                 stg_dum_data_tbl, stg_dum_data_tbl };

void effect_06_move(WORK_Other *ewk) {
#if defined(TARGET_PS2)
    void set_char_move_init(WORK * wk, s16 koc, s32 index);
#endif
    if (obr_no_disp_check() == 0) {
        switch (ewk->wu.routine_no[0]) {
        case 0:
            ewk->wu.routine_no[0]++;
            ewk->wu.disp_flag = 1;
            set_char_move_init(&ewk->wu, 0, ewk->wu.char_index);
            break;

        case 1:
            if (compel_dead_check(ewk)) {
                ewk->wu.routine_no[0]++;
                break;
            }

            disp_pos_trans_entry_rs(ewk);
            break;

        default:
            all_cgps_put_back(&ewk->wu);
            push_effect_work(&ewk->wu);
            break;
        }
    }
}

#if defined(TARGET_PS2)
INCLUDE_ASM("asm/anniversary/nonmatchings/sf33rd/Source/Game/eff06", effect_06_init);
#else
s32 effect_06_init() {
    not_implemented(__func__);
}
#endif

const s16 scr_obj_num6[22] = { 1, 6, 4, 0, 3, 1, 0, 2, 8, 3, 0, 4, 3, 0, 1, 1, 4, 0, 1, 1, 0, 0 };

const s16 st0000_data_tbl[8] = { 0x0000, 0x0002, 0x212C, 0x0280, 0x0030, 0x0052, 0x0000, 0x0000 };

const s16 st0100_data_tbl[48] = { 0x0000, 0x0001, 0x012C, 0x0288, 0x0030, 0x0056, 0x0001, 0x0000, 0x0000, 0x0001,
                                  0x012C, 0x02D8, 0x0030, 0x0056, 0x0002, 0x0000, 0x0000, 0x0001, 0x012C, 0x0318,
                                  0x0030, 0x0056, 0x0003, 0x0000, 0x0000, 0x0002, 0x212C, 0x0288, 0x0010, 0x000A,
                                  0x0012, 0x0000, 0x0000, 0x0002, 0x212C, 0x01A0, 0x0030, 0x0046, 0x0014, 0x0000,
                                  0x0000, 0x0002, 0x212C, 0x0108, 0x0030, 0x0048, 0x0015, 0x0000 };

const s16 st0B00_data_tbl[32] = { 0x0000, 0x0001, 0x012C, 0x0288, 0x0030, 0x0056, 0x0001, 0x0000,
                                  0x0000, 0x0001, 0x012C, 0x02D8, 0x0030, 0x0056, 0x0002, 0x0000,
                                  0x0000, 0x0001, 0x012C, 0x0318, 0x0030, 0x0056, 0x0003, 0x0000,
                                  0x0000, 0x0002, 0x012C, 0x01CF, 0x00C1, 0x0053, 0x0016, 0x0000 };

const s16 st0200_data_tbl[32] = { 0x0000, 0x0006, 0x212C, 0x00A0, 0x0040, 0x0056, 0x0000, 0x0000,
                                  0x0000, 0x0006, 0x212C, 0x00E0, 0x0040, 0x0056, 0x0001, 0x0000,
                                  0x0000, 0x0006, 0x212C, 0x0150, 0x0040, 0x0056, 0x0002, 0x0000,
                                  0x0000, 0x0006, 0x212C, 0x01B0, 0x0040, 0x0056, 0x0003, 0x0000 };

const s16 st0A00_data_tbl[48] = { 0x0000, 0x0003, 0x012C, 0x01C0, 0x0010, 0x0058, 0x0009, 0x0000, 0x0000, 0x0003,
                                  0x012C, 0x0210, 0x0010, 0x0058, 0x000B, 0x0000, 0x0000, 0x0003, 0x012C, 0x0260,
                                  0x0010, 0x0058, 0x000C, 0x0000, 0x0000, 0x0003, 0x012C, 0x02B0, 0x0010, 0x0058,
                                  0x000D, 0x0000, 0x0000, 0x0003, 0x012C, 0x0300, 0x0010, 0x0058, 0x000E, 0x0000,
                                  0x0000, 0x0003, 0x012C, 0x0350, 0x0010, 0x0058, 0x000F, 0x0000 };

const s16 st0400_data_tbl[24] = { 0x0000, 0x0002, 0x212C, 0x02A0, 0x0018, 0x000A, 0x0000, 0x0000,
                                  0x0000, 0x0002, 0x012C, 0x01A0, 0x0048, 0x0052, 0x0001, 0x0000,
                                  0x0000, 0x0002, 0x012C, 0x00C0, 0x0000, 0x000A, 0x000C, 0x0000 };

const s16 st0500_data_tbl[56] = { 0x0000, 0x0003, 0x212C, 0x01B0, 0x0000, 0x0052, 0x0008, 0x0000, 0x0000, 0x0002,
                                  0x012C, 0x00A0, 0x0000, 0x0054, 0x0000, 0x0000, 0x0000, 0x0002, 0x012C, 0x0100,
                                  0x0000, 0x0054, 0x0001, 0x0000, 0x0000, 0x0002, 0x012C, 0x0160, 0x0000, 0x0054,
                                  0x0002, 0x0000, 0x0000, 0x0002, 0x012C, 0x02A0, 0x0000, 0x0054, 0x0005, 0x0000,
                                  0x0000, 0x0002, 0x012C, 0x0300, 0x0000, 0x0054, 0x0006, 0x0000, 0x0000, 0x0002,
                                  0x012C, 0x0360, 0x0000, 0x0054, 0x0007, 0x0000 };

const s16 st1300_data_tbl[56] = { 0x0000, 0x0003, 0x212C, 0x01B0, 0x0000, 0x0052, 0x0014, 0x0000, 0x0000, 0x0002,
                                  0x012C, 0x00A0, 0x0000, 0x0054, 0x000C, 0x0000, 0x0000, 0x0002, 0x012C, 0x0100,
                                  0x0000, 0x0054, 0x000D, 0x0000, 0x0000, 0x0002, 0x012C, 0x0160, 0x0000, 0x0054,
                                  0x000E, 0x0000, 0x0000, 0x0002, 0x012C, 0x02A0, 0x0000, 0x0054, 0x0011, 0x0000,
                                  0x0000, 0x0002, 0x012C, 0x0300, 0x0000, 0x0054, 0x0012, 0x0000, 0x0000, 0x0002,
                                  0x012C, 0x0360, 0x0000, 0x0054, 0x0013, 0x0000 };

const s16 st0700_data_tbl[16] = { 0x0000, 0x0006, 0x212C, 0x0120, 0x0050, 0x005D, 0x0000, 0x0000,
                                  0x0000, 0x0006, 0x212C, 0x01A0, 0x0030, 0x005D, 0x0001, 0x0000 };

const s16 st0800_data_tbl[88] = { 0x0000, 0x0007, 0x212C, 0x0100, 0x002B, 0x0058, 0x000A, 0x0000, 0x0000, 0x0007,
                                  0x212C, 0x0180, 0x002B, 0x0058, 0x000B, 0x0000, 0x0000, 0x0007, 0x212C, 0x02F0,
                                  0x002B, 0x0058, 0x0010, 0x0000, 0x0000, 0x0002, 0x212C, 0x00C0, 0x0030, 0x0056,
                                  0x0000, 0x0000, 0x0000, 0x0002, 0x212C, 0x0240, 0x0030, 0x0056, 0x0002, 0x0000,
                                  0x0000, 0x0002, 0x212C, 0x0320, 0x0030, 0x0056, 0x0003, 0x0000, 0x0000, 0x0006,
                                  0x212C, 0x0280, 0x0080, 0x0055, 0x0006, 0x0000, 0x0000, 0x0006, 0x212C, 0x0170,
                                  0x00A0, 0x0055, 0x0007, 0x0000, 0x0000, 0x0002, 0x212C, 0x0150, 0x0058, 0x0056,
                                  0x0006, 0x0000, 0x0000, 0x0006, 0x212C, 0x0202, 0x0088, 0x0056, 0x0008, 0x0000,
                                  0x0000, 0x0006, 0x212C, 0x02D2, 0x0038, 0x0056, 0x0009, 0x0000 };

const s16 st0900_data_tbl[24] = { 0x0000, 0x0003, 0x212C, 0x01D0, 0x0040, 0x0056, 0x0006, 0x0000,
                                  0x0000, 0x0007, 0x212C, 0x0200, 0x0060, 0x0058, 0x0007, 0x0000,
                                  0x0000, 0x0006, 0x212C, 0x0340, 0x0010, 0x000A, 0x0005, 0x0000 };

const s16 st0c00_data_tbl[24] = { 0x0000, 0x0003, 0x212C, 0x01D0, 0x0040, 0x0056, 0x0000, 0x0000,
                                  0x0000, 0x0007, 0x212C, 0x0200, 0x0060, 0x0058, 0x0001, 0x0000,
                                  0x0000, 0x0006, 0x212C, 0x0340, 0x0010, 0x000A, 0x0005, 0x0000 };

const s16 st0e00_data_tbl[8] = { 0x0000, 0x0002, 0x212C, 0x0250, 0x0010, 0x000A, 0x0000, 0x0000 };

const s16 st1000_data_tbl[16] = { 0x0000, 0x0002, 0x212C, 0x01C0, 0x0010, 0x000E, 0x0001, 0x0000,
                                  0x0000, 0x0002, 0x212C, 0x03A0, 0x0020, 0x0048, 0x0003, 0x0000 };

const s16 st1100_data_tbl[32] = { 0x0000, 0x0001, 0x212C, 0x0100, 0x0040, 0x005A, 0x0000, 0x0000,
                                  0x0000, 0x0001, 0x212C, 0x0180, 0x0080, 0x005A, 0x0001, 0x0000,
                                  0x0000, 0x0001, 0x212C, 0x0270, 0x0080, 0x005A, 0x0004, 0x0000,
                                  0x0000, 0x0003, 0x212C, 0x0310, 0x0080, 0x000A, 0x0007, 0x0000 };

const s16 st1400_data_tbl[8] = { 0x0000, 0x0003, 0x012C, 0x01F0, 0x0040, 0x0058, 0x0004, 0x0000 };
